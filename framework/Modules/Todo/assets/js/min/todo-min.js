defineModule({domLink:{"class":"todo"},events:{'click [data-event="viewList"]':"viewList",'click [data-event="viewItem"]':"viewItem",'click [data-event="toggleItem"]':"toggleItem",'click [data-event="viewItemLink"]':"viewItemLink"},initialize:function(){var t=this;$(this.querySelector(".modal")).find("iframe").load(function(t){$(t.target).height($(t.target).contents().find("body")[0].scrollHeight)}),$(this.querySelector(".modal")).on("hide.bs.modal",function(){var e=$(t.querySelector(".todo-lists")).find(".active").data("id");t.fetchList(e)})},itemCompleted:function(){$(this.querySelector(".modal")).modal("hide")},fetchRegexFromHash:function(t){var e=window.location.hash;if(e.length>0){var i=t.exec(e);if(i)return i[1]}return null},fetchList:function(t){var e=$('a[data-id="'+t+'"]');e.closest("li").siblings("li").children("a").removeClass("active"),e.addClass("active"),this.emit("viewList",{listId:t})},fetchItem:function(t){var e=this.fetchRegexFromHash(/&item=(.*)$/);e&&this.emit("viewItem",{listId:t,itemId:e})},viewList:function(t){var e=t.target.dataset.id;this.fetchList(e)},viewItem:function(t){var e=$(t.target).closest("li").data("listId"),i=$(t.target).closest("li").data("id"),a=t.target.dataset.event;this.emit(a,{listId:e,itemId:i})},toggleItem:function(t){var e=t.target,i=$(t.target).closest("li").data("listId"),a=$(t.target).closest("li").data("id");$(e).is(":checked")?this.emit("completeItem",{itemId:a,listId:i}):this.emit("undoCompleteItem",{itemId:a,listId:i})},viewItemLink:function(t){if("_blank"!=$(t.target).attr("target")){t.preventDefault();var e=this.querySelector(".modal");$(e).find(".modal-title").html($(t.target).data("title")),$(e).find(".modal-body iframe").contents().find("body").html(""),$(e).find(".modal-body iframe").attr("src",$(t.target).attr("href")),$(e).modal("show")}var i=$(t.target).parent().data("listId"),a=$(t.target).parent().data("id"),d=t.target.dataset.event;this.emit(d,{itemId:a,listId:i})}});